/* /shared/styles.css
   ✅ Updated to match the new locked palette + compact/minimalistic rules
   ✅ Does NOT remove any selectors or break existing functionality
   ✅ Keeps backward-compatible tokens (--bg, --card, --ink, etc.)
*/

:root{
  /* ===== LOCKED PALETTE (must preserve exactly) ===== */
  --one-bg:#0F1727;          /* Primary Deep Blue (Main Background) */
  --one-surface-1:#1A2233;   /* Secondary Deep Blue (Panels / Cards) */
  --one-surface-2:#1A2233;   /* keep same for now to avoid visual mismatches */
  --one-text:#BCC1C9;        /* Neutral Light (Text / Subtle UI) */
  --one-muted:#BCC1C9;       /* keep muted aligned unless overridden */
  --one-border:#414D52;      /* Muted Slate (Borders / Secondary UI) */

  --one-green:#AAC930;       /* Accent Green (Primary CTA / Highlights) */
  --one-blue:#0050A0;        /* legacy brand blue (rare) */
  --one-red:#ef4444;

  /* ===== Backward compatible tokens (existing code expects these) ===== */
  --ink:#0f172a;
  --muted:#64748b;
  --bg:#f8fafc;
  --card:#fff;
  --brand:#111827;

  --ok:#16a34a;
  --err:#dc2626;

  --br:14px;
  --line:#e2e8f0;

  --blue-50:#e0f2fe;
  --blue-100:#bae6fd;

  /* ===== Density controls (safe, optional) ===== */
  --pad-card:16px;
  --pad-card-mobile:14px;
}

*{box-sizing:border-box}

html,body{
  margin:0;
  padding:0;
  font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;
  color:var(--ink);
  background:var(--bg);
  -webkit-text-size-adjust: 100%;
}

.wrap{max-width:1100px;margin:24px auto;padding:0 16px}
h1{margin:0 0 8px;font-size:28px}
.sub{color:var(--muted);margin:6px 0 18px}

/* =========================
   Buttons
   ========================= */
.btn{
  appearance:none;border:0;border-radius:10px;
  background:var(--brand);color:#fff;
  padding:10px 14px;font-weight:600;cursor:pointer;
  display:inline-flex;align-items:center;gap:8px;
  text-decoration:none; /* ✅ remove underline even if <a> */
}
.btn.light{background:#eef2ff;color:#111827}

/* ONE brand alignment */
.btn.green{background:var(--one-green); color:#0b1223;}
.btn.red{background:var(--one-red);}

.row{display:flex;gap:14px;flex-wrap:wrap;align-items:center}
.pill{background:#eef2ff;padding:6px 10px;border-radius:999px;font-size:13px;color:#1e3a8a}

.card{
  background:var(--card);
  border-radius:var(--br);
  box-shadow:0 1px 2px rgba(0,0,0,.06);
  padding:var(--pad-card);
  margin:16px 0;
  overflow-wrap:anywhere;
}
@media (max-width:520px){
  .wrap{margin:16px auto}
  .card{ padding:var(--pad-card-mobile); margin:14px 0; }
}

.card h2{margin:0 0 12px}

label{font-size:13px;color:#a1a1aa;display:block;margin:10px 0 6px}
input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;outline:none}
textarea{min-height:70px}

table{width:100%;border-collapse:collapse}
th,td{padding:12px;border-bottom:1px solid #eef2f7;text-align:left;font-size:14px;vertical-align:top}
th{color:#475569}

.msg{margin-top:10px;font-size:14px}
.msg.ok{color:var(--ok)}
.msg.err{color:var(--err)}
.badge{display:inline-block;padding:4px 9px;border-radius:999px;background:#f1f5f9;font-size:12px}
.sticky{background:#fff7ed;border:1px solid #fed7aa;padding:10px;border-radius:10px;color:#9a3412}
.actions button{margin-right:8px}
.small{font-size:12px;color:#64748b}
.ratingRow{background:#f8fafc;border:1px dashed #e2e8f0;border-radius:12px;padding:10px;margin-top:8px}
.ratingRow .row>div{min-width:120px}
.ratingHint{font-size:12px;color:#64748b;margin-top:6px}

/* =========================
   Header (centered)
   ========================= */
.topbar{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  gap:12px;
  padding:10px 14px;
  background:#fff;
  border-bottom:1px solid var(--line);
  position:sticky;
  top:0;
  z-index:9;
}
.topbar__left{justify-self:start}
.topbar__center{justify-self:center;text-align:center;min-width:0}
.topbar__right{justify-self:end;display:flex;align-items:center;gap:6px;flex-wrap:nowrap;white-space:nowrap}
.topbar__title{font-weight:700;letter-spacing:.2px}
.topbar__subtitle{font-size:12px;color:#94a3b8;margin-top:2px}

.brand{display:flex;align-items:center;gap:10px;min-width:0}
.brand img{
  height:30px;
  width:auto;
  display:block;
  max-width:100%;
}

/* ✅ Header logo stability */
.topbar__center .brand{ justify-content:center; min-width:0; }
.topbar__center img{
  max-height:32px;
  width:auto;
  max-width:min(72vw, 260px);
  object-fit:contain;
}
@media (max-width:520px){
  .topbar { padding-top:6px; padding-bottom:6px; }
  .topbar__center img{ max-height:30px; max-width:min(80vw, 240px); }
}

/* =========================
   Season bar beneath header
   ========================= */
.seasonbar{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  padding:8px 12px;
  font-size:12px;
  color:#0f172a;
  background:var(--blue-50);
  border-bottom:1px solid var(--blue-100);
}
.seasonbar.reverse{ background:#fef3c7; border-color:#fde68a; }
.seasonbar__left{font-weight:600}
.seasonbar__right{display:flex;align-items:center;gap:8px;flex-wrap:wrap}

/* Seasonbar links */
.seasonbar a{ color:inherit; text-decoration:none; }
.seasonbar a:hover{ text-decoration:underline; }

.seasonbar__link{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  font-weight:700;
  line-height:1;
}

/* Support About ONE both ways */
.seasonbar .about-pill,
.seasonbar__link--one{
  color:var(--one-green) !important;
  font-weight:800;
}

/* Small circular Home icon */
.iconbtn{
  display:inline-grid;place-items:center;
  width:28px;height:28px;border-radius:999px;
  background:#ffffff;border:1px solid var(--line);
}
.iconbtn svg{width:16px;height:16px;fill:#111827}

/* =========================
   Common Home helpers
   ========================= */
.home-wrap{max-width:960px;margin:16px auto;padding:0 16px}
.welcome{margin:12px 0 12px;font-size:18px;font-weight:600}
.pill-row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 14px}
.cta-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
.cta-card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:16px}
.cta-card h3{margin:0 0 8px 0}
.cta-card .btn{width:100%;height:44px}
@media (max-width:640px){
  .cta-card{padding:14px}
  .cta-grid{grid-template-columns:1fr}
}

/* Sign-in tweaks */
@media (max-width: 480px) {
  .signin-card { padding: 18px; border-radius: 14px; }
  .signin-title { font-size: 24px; }
}

/* =========================
   DARK THEME (locked palette; reduced glow/shadow)
   ========================= */
.app-dark {
  --bg:var(--one-bg);
  --card:var(--one-surface-1);
  --ink:var(--one-text);
  --muted:var(--one-text);
  --brand:var(--one-surface-1);
  --line:rgba(65,77,82,.85);   /* border line based on #414D52 */
  --ok:var(--one-green);
  --err:var(--one-red);
}

.app-dark .wrap { color:var(--ink); }

.app-dark .card{
  background: var(--one-surface-1);
  border:1px solid rgba(65,77,82,.85);
  box-shadow:none; /* ✅ remove heavy glow */
}

.app-dark .badge {
  background:rgba(65,77,82,.25);
  color:var(--one-text);
  border:1px solid rgba(65,77,82,.55);
}

.app-dark input,
.app-dark select,
.app-dark textarea{
  background:#0f1626;
  color:var(--one-text);
  border:1px solid rgba(65,77,82,.85);
}

.app-dark .btn{
  background:#111a2a;
  color:var(--one-text);
  border:1px solid rgba(65,77,82,.85);
  box-shadow:none; /* ✅ reduce glow */
}

.app-dark .btn.light{
  background:rgba(255,255,255,.06);
  color:var(--one-text);
  border:1px solid rgba(65,77,82,.85);
}

.app-dark .pill{
  background:rgba(255,255,255,.06);
  color:var(--one-text);
  border:1px solid rgba(65,77,82,.85);
}

.app-dark .topbar{
  background:#0f1626;
  color:var(--one-text);
  border-bottom:1px solid rgba(65,77,82,.85);
}

.app-dark .topbar__title{color:var(--one-text);}

.app-dark .seasonbar{
  color:var(--one-text);
  background:#121b2b; /* ✅ simple, no gradients */
  border-bottom:1px solid rgba(65,77,82,.85);
}

.app-dark .seasonbar.reverse{
  background:#2a1e12;
}

.app-dark .iconbtn{
  background:#0f1626;
  border:1px solid rgba(65,77,82,.85);
}
.app-dark .iconbtn svg{fill:var(--one-text);}

.app-dark th{color:var(--one-text);}
.app-dark th, .app-dark td{border-bottom:1px solid rgba(65,77,82,.65);}

/* Chips in dark theme */
.app-dark .chip.exam{background:rgba(239,68,68,.14);color:#fecaca;border-color:rgba(239,68,68,.28);}
.app-dark .chip.class{background:rgba(14,165,233,.14);color:#bae6fd;border-color:rgba(14,165,233,.28);}
.app-dark .chip.sub{background:rgba(170,201,48,.14);color:#e6f3a6;border-color:rgba(170,201,48,.28);}
.app-dark .sticky{background:rgba(251,191,36,.08);border-color:rgba(251,191,36,.25);color:#fde68a;}

/* Header compact on mobile */
@media (max-width: 520px){
  .topbar__subtitle{display:none!important;}
  .topbar__title{font-size:18px!important; line-height:1.2!important;}
}

/* =========================
   Academics Checklist (Horizontal grid)
   ========================= */
#subjectChecklist{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:12px 14px;
  align-items:stretch;
}
@media (min-width:480px){ #subjectChecklist{grid-template-columns:repeat(4,minmax(0,1fr));} }
@media (min-width:720px){ #subjectChecklist{grid-template-columns:repeat(5,minmax(0,1fr));} }
@media (min-width:1024px){ #subjectChecklist{grid-template-columns:repeat(6,minmax(0,1fr));} }

#subjectChecklist label{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  background:rgba(15,23,39,.35);
  border:1px solid rgba(65,77,82,.75);
  box-shadow:none;
  line-height:1.2;
  min-height:44px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Native checkbox (stable across iOS) */
#subjectChecklist input[type="checkbox"]{
  -webkit-appearance: checkbox !important;
  appearance: checkbox !important;
  width:18px;height:18px;
  accent-color:var(--one-green);
  margin:0;
}

/* =========================
   OPTIONAL: Table scrolling
   ========================= */
.table-scroll{
  overflow-x:auto;
}
.table-scroll table{ width:100%; border-collapse:collapse; }
.table-scroll th,
.table-scroll td{
  white-space:nowrap;
  overflow-wrap:normal;
  word-break:normal;
}

/* ===============================================================
   ATTENDANCE bottom sheet (iOS label clipping fix – scoped)
   =============================================================== */
#attnToast .attn-choices{ display:flex; flex-direction:column; gap:10px; }
#attnToast .row,
#attnToast .attn-row{ display:flex; align-items:center; gap:10px; min-width:0; }

#attnToast label{
  display:inline-flex !important;
  align-items:center;
  gap:10px;
  margin:0 !important;
  padding:0;
  min-width:0 !important;
  white-space:normal;
  color:inherit;
}

#attnToast input[type="checkbox"]{
  -webkit-appearance: checkbox !important;
  appearance: checkbox !important;
  accent-color:var(--one-green);
  width:18px;height:18px;
  margin:0 8px 0 0;
  flex:0 0 auto;
}

#attnToast label > span{
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
}

#attnToast,
#attnToast * { -webkit-text-size-adjust: 100%; }

/* Make toast text readable (light sheet) */
#attnToast,
#attnToast .attn-choices,
#attnToast .attn-row,
#attnToast label,
#attnToast label > span { color:#0f172a !important; }

/* ===============================================================
   ATTENDANCE banner on Home (#attnBanner) — iOS visibility/layout
   =============================================================== */
#attnBanner,
#attnBanner *{
  -webkit-text-size-adjust: 100%;
  color:#0f172a !important;
}

#attnBanner{ background:#ffffff !important; }

#attnBanner .row,
#attnBanner .attn-row{ display:flex; align-items:center; gap:10px; min-width:0; }

#attnBanner label{
  display:inline-flex !important;
  align-items:center;
  gap:10px;
  margin:0 !important;
  padding:0;
  min-width:0 !important;
  white-space:normal;
}

#attnBanner label > span{
  display:inline-block;
  flex:1 1 auto;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
}

#attnBanner input[type="checkbox"]{
  -webkit-appearance: checkbox !important;
  appearance: checkbox !important;
  accent-color:var(--one-green);
  width:18px;height:18px;
  margin:0 8px 0 0;
  flex:0 0 auto;
}

/* Attendance banner buttons */
#attnBanner .btn{ color:#fff !important; }
#attnBanner .btn.light{
  color:#0f172a !important;
  background:#eef2ff !important;
  border-color: var(--line) !important;
}